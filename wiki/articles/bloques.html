<!DOCTYPE html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<html class="no-js" lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    


  <title>Bloques</title>
  <meta property="og:title" content="Bloques" />






<link rel="canonical" href="wiki.uqbar.org/wiki/articles/bloques.html" />
<meta property="og:url" content="wiki.uqbar.org/wiki/articles/bloques.html" />
<meta property="og:site_name" content="uqbar-wiki" />
<meta name="application-name" content="uqbar-wiki"/>

<meta property="og:updated_time" content=" 2025-07-10T21:15:21-03:00" />






  <meta property="keywords" content="" />











    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" >
    <link type="text/plain" rel="author" href="/humans.txt"/>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">    

    <link rel="stylesheet" href="/assets/app-1e946f931f577cd478e6e6610915be9d.css">
    <style>
        .navbar {
            -webkit-backface-visibility: hidden;
        }
    </style>
</head>

<body>

<nav class="top-bar navbar-background" data-topbar>
    <ul class="title-area">
        <li class="name">
            <div id="pagetitle"><img alt="Uqbar" src="/img/proyecto-uqbarwiki.png" height="100px"
                    width="100px" /></div>
        </li>
    </ul>
    <ul class="left">
        <div class="mobile">
            <div class="navbar-buttons">
                <div class="navbar-icon-link">
                    <a href="/"><img alt="Home" src="/img/wiki/home-2.png" height="25px"
                            width="25px" title="Home" /></a>
                </div>
                <div class="navbar-icon-link">
                    <a href="/articles"><img alt="Artículos" src="/img/wiki/list.png"
                            height="25px" width="25px" title="Artículos" /></a>
                </div>
            </div>
        </div>
    </ul>
</nav>

<div class="column small-0 medium-2 large-2 sidebar" style="margin-top: 5px;">
        <!-- Html Elements for Search -->
<div id="search-container">
    <input type="text" id="search-input" name="search-input" placeholder="Artículo a buscar...">
    <ul id="results-container"></ul>
    <hr>
</div>

        <div class="not-mobile">
                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" title="Links" role="menu">
                        <li class="button" role="menuitem"><a href="/" class="sidebar-link"><img
                                                alt="Home" src="/img/wiki/home-2.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Home</a></li>
                        <li class="button" role="menuitem"><a href="/articles" class="sidebar-link"><img
                                                alt="Artículos" src="/img/wiki/list.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Artículos</a></li>
                </ul>

                <hr>

                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" role="menu">
                        <img src="/img/wiki/utn.png" alt="UTN" height="40px" width="40px" title="UTN" />
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/paradigmas-de-programacion.html">Paradigmas
                                        de
                                        programación</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/design-temario.html">Diseño de
                                        Sistemas</a>
                        </li>
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/tecnicas-avanzadas-de-programacion.html">Técnicas
                                        avanzadas de programación</a></li>
                        <br>
                        <img src="/img/wiki/unsam.png" alt="UNSAM" height="40px" width="40px"
                                title="UNSAM" />
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo2-temario.html">Algoritmos
                                        II</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo3-temario.html">Algoritmos
                                        III</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/phm-temario.html">Programación
                                        con
                                        Herramientas
                                        Modernas</a></li>
                </ul>
        </div>
</div>

<div class="column small-12 medium-10 large-10">
    <div id="article_title">
    <h1>
        <i>Bloques</i>
    </h1>
</div>



<div id="article_content">
    <h2 id="qué-es-un-bloque">¿Qué es un bloque?</h2>

<p>Un bloque (también conocido como closure) es un objeto, y por lo tanto podemos hacer con él lo mismo que hacíamos con los demás objetos esto es:</p>

<ul>
  <li>Enviarle mensajes</li>
  <li>Pasarlo como parámetro de algún mensaje</li>
  <li>Hacer que una variable lo referencie</li>
</ul>

<p>Un objeto bloque representa un cacho de código que no se ejecutó, ese código solo se ejecutará si alguien le manda un mensaje que le indique hacerlo. Veamos algunos ejemplos en el lenguaje Wollok:</p>

<p>Si ejecutamos las siguientes instrucciones:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">var</span><span class="err"> </span><span class="n">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="mi">0</span>
<span class="o">{</span><span class="err"> </span><span class="n">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">x</span><span class="err"> </span><span class="o">+</span><span class="err"> </span><span class="mi">1</span><span class="err"> </span><span class="o">}</span>
</code></pre></div></div>

<p>¿A qué objeto apunta la variable x después de ejecutar esas 2 líneas de código? ¡Claro, al objeto cero (0)! Porque sólo creamos el bloque, pero el código del mismo nunca se evaluó.</p>

<p>Para que la variable x apunte al objeto uno (1) tenemos que decirle al bloque que se ejecute.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">var</span><span class="err"> </span><span class="n">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="mi">0</span>
<span class="o">{</span><span class="err"> </span><span class="n">x</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="n">x</span><span class="err"> </span><span class="o">+</span><span class="err"> </span><span class="mi">1</span><span class="err"> </span><span class="o">}.</span><span class="na">apply</span><span class="o">()</span>
</code></pre></div></div>

<p>Ahora sí, después de ejecutar esas 2 líneas de código la variable x va a apuntar al objeto uno (1). Es importante darse cuenta que apply() es un mensaje que le llega al objeto bloque. Este mensaje hace que se ejecute el código que está dentro del bloque y que se retorne el objeto devuelto por la última sentencia del bloque.</p>

<h2 id="conocimiento-del-contexto">Conocimiento del contexto</h2>

<p>Algo que se pone en evidencia en este ejemplo introductorio es que los bloques tienen una noción del contexto en el cual fueron definidos, y por eso es que tienen acceso a las referencias disponibles en dicho contexto. Es por eso que es posible usar la variable x que había sido definida fuera del bloque.</p>

<p>Si tuviéramos el siguiente código:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">pepita</span> <span class="o">{</span>
  <span class="k">var</span> <span class="n">energia</span> <span class="k">=</span> <span class="mi">100</span>
  
  <span class="n">method</span> <span class="n">volar</span><span class="o">(</span><span class="n">metros</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">energia</span> <span class="o">-=</span> <span class="mi">10</span> <span class="o">-</span> <span class="n">metros</span>
  <span class="o">}</span>
  
  <span class="n">method</span> <span class="n">irYVolverNVeces</span><span class="o">(</span><span class="n">metros</span><span class="o">,</span> <span class="n">veces</span><span class="o">){</span>
    <span class="n">veces</span><span class="o">.</span><span class="n">times</span><span class="o">({</span><span class="n">n</span> <span class="k">=&gt;</span> <span class="n">self</span><span class="o">.</span><span class="n">volar</span><span class="o">(</span><span class="n">metros</span> <span class="o">*</span> <span class="mi">2</span><span class="o">)</span> <span class="o">})</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Y luego evaluamos: <code class="language-plaintext highlighter-rouge">pepita.irYVolverNVeces(5, 3)</code></p>

<p>El mensaje <code class="language-plaintext highlighter-rouge">times(algoParaHacer)</code> que se le manda al número 3 con el bloque que construímos en ese momento se encargará de mandarle el mensaje <code class="language-plaintext highlighter-rouge">apply(valor)</code> al bloque que le pasamos, en este caso, 3 veces. Dado que la referencia metros existía en el contexto en el cual ese bloque fue creado (era un parámetro del método), es válido usar esa referencia dentro de la lógica del bloque y va a apuntar al objeto 5, como es de esperarse.</p>

<blockquote>
  <p>El parámetro que se usa para aplicar el bloque será primero 1, luego 2 y finalmente 3. Esta información es irrelevante para el ejemplo, pero el bloque debe recibir un parámetro para que entienda el mensaje que recibirá cuando se evalúe el método <code class="language-plaintext highlighter-rouge">times</code>.</p>
</blockquote>

<p>Otra pregunta interesante es: <strong>¿quién es <a href="self---pseudovariable.html">self</a> dentro del bloque?</strong></p>

<p>Cuando usamos self dentro de un bloque, estamos referenciando al mismo objeto que recibió el mensaje dentro del cual se creó el bloque (o sea, <strong>pepita</strong>), lo cual es muy convieniente ya que hace que no necesitemos parametrizar a self si necesitamos mandarle mensajes o parametrizarlo a otro mensaje dentro del código del bloque.</p>

<p>Finalmente, el resultado de la operación será que la energía de pepita se habrá decrementado en 60.</p>

<h2 id="bloques-como-funciones">Bloques como funciones</h2>

<p>También se puede ver a los bloques como objetos que representan una función sin nombre (o sea, una función anónima, como las <a href="expresiones-lambda.html">Expresiones lambda</a> de funcional!).</p>

<p>El bloque <code class="language-plaintext highlighter-rouge">{ 1 }</code> en Wollok es como una función constante que siempre devuelve 1 si le decís que se ejecute. Pero el chiste de las funciones es que reciban parámetros y los bloques también pueden recibir parámetros, por ejemplo la sintaxis de Wollok para un bloque de dos parámetros es <code class="language-plaintext highlighter-rouge">{ parametro1, parametro2 =&gt; cuerpoDelBloque }</code></p>

<p>Ejemplos:</p>

<p>Podríamos representar las siguientes funciones…</p>

<p><code class="language-plaintext highlighter-rouge">f(x) = 2x</code></p>

<p><code class="language-plaintext highlighter-rouge">g(x,y) = x2 + y2</code></p>

<p>… con bloques de la siguiente forma:</p>

<p><code class="language-plaintext highlighter-rouge">var f = {x =&gt; 2 * x }</code></p>

<p><code class="language-plaintext highlighter-rouge">var g = {x, y =&gt; x ** 2 + y ** 2 }</code></p>

<p>¿Cómo hacemos para usar bloques que tienen parámetros? Por ejemplo si quisiéramos los equivalentes a evaluar las funciones f(4) y g(4,3)</p>

<p><code class="language-plaintext highlighter-rouge">f.apply(4) // Esto devuelve el objeto 8</code></p>

<p><code class="language-plaintext highlighter-rouge">g.apply(4, 3) // Esto devuelve el objeto 25</code></p>

<p>Por lo general el uso que le damos a los bloques es sólo la creación de los mismos para pasar por parámetro a funcionalidad ya existente de propósito general, como son los mensajes de colecciones <a href="mensajes-de-colecciones.html">Mensajes de colecciones</a>, y no tanto la aplicación de los mismos. Sin embargo es interesante saber cómo es que las colecciones son capaces de evaluar lo que les pedimos.</p>

<p>Para pensar: ¿Los mensajes que esperan por parámetro un bloque, podrán recibir por parámetro un objeto programado por nosotros? ¿Qué es lo que una colección necesita realmente que le pasemos por parámetro para poder realizar un filtrado?</p>

<h2 id="cómo-funciona-el-iftrue-y-el-iffalse-de-smalltalk">¿Cómo funciona el #ifTrue: y el #ifFalse: de <strong>Smalltalk</strong>?</h2>

<p>En el caso de Smalltalk, el uso de bloques es aún más generalizado, ya que al no existir estructuras de control y tener una sintaxis completamente basada en mensajes a objetos, los bloques se usan por ejemplo para poder saber qué hacer en un condicional cuando la condición se cumple o no se cumple. Esto se logra mediante ditintos mensajes que entienden los booleanos que representan la condición sobre la cual queremos decidir.</p>

<p>Si en un workspace escribimos</p>

<div class="language-smalltalk highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">pepita</span><span class="err"> </span><span class="nv">energia</span><span class="err"> &gt; </span><span class="m">0</span><span class="err"> ifTrue: </span><span class="p">[</span><span class="err"> </span><span class="nv">pepita</span><span class="err"> come: </span><span class="m">30</span><span class="err"> </span><span class="p">]</span>
</code></pre></div></div>

<p>Pensando en términos de objeto y mensaje (mensaje = selector + parámetros), ¿qué está pasando acá?</p>

<p>El objeto receptor del mensaje <code class="language-plaintext highlighter-rouge">ifTrue:</code> es el objeto que me devuelve <code class="language-plaintext highlighter-rouge">pepita energia &gt; 0</code>, ese objeto puede ser true o false.</p>

<p>Si el receptor es true queremos que el bloque <code class="language-plaintext highlighter-rouge">[ pepita come: 30 ]</code> se ejecute. Si el receptor es false NO queremos que el bloque <code class="language-plaintext highlighter-rouge">[ pepita come: 30 ]</code> se ejecute.</p>

<p>Entonces el objeto que tiene la responsabilidad de saber si el bloque debe o no ejecutarse es el booleano receptor del mensaje <code class="language-plaintext highlighter-rouge">ifTrue:</code>.</p>

<p>Siendo false la única instancia de la clase False y true la única instancia de la clase True, la implementación del método <code class="language-plaintext highlighter-rouge">ifTrue:</code> en cada una de las clases es</p>

<div class="language-smalltalk highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">True</span><span class="err"> &gt;&gt; ifTrue: </span><span class="nv">unBloque</span>
<span class="err">  </span><span class="c">"self apunta a true entonces queremos que se ejecute el bloque"</span>
<span class="err">  </span><span class="o">^</span><span class="nv">unBloque</span><span class="err"> </span><span class="nv">value</span>
  
<span class="nf">False</span><span class="err"> &gt;&gt; ifTrue: </span><span class="nv">unBloque</span>
<span class="err">  </span><span class="c">"self apunta a false entonces NO queremos que se ejecute el bloque"</span>
<span class="err">  </span><span class="o">^</span><span class="bp">nil</span>
</code></pre></div></div>

<p>O sea que las estructuras de control a las que estábamos acostumbrados por el paradigma estructurado, no son más que mensajes polimórficos :smile:. Todo sigue las mismas reglas, objetos y mensajes.</p>


</div>





<div id="article_metadata">
    <!-- <p><i>Latest update on September 11, 2020 by
        GitHub</i></p>

    <ul class="accordion" data-accordion>
        <li class="accordion-navigation">
            <a href="#panel1a">Page History, Meta information</a>

            <div id="panel1a" class="content">

                <div class="rows">
                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Page Commits</th>
                                <th>Page Additions</th>
                                <th>Page Deletions</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                <td>10</td>
                                <td>93</td>
                                <td>65</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Commits</th>
                            <tr>
                            </thead>

                            <tbody>
                            
                            <tr>
                                <td>Ernesto Bossi</td>
                                <td>bossi.e...</td>
                                <td>1</td>
                            </tr>
                            
                            <tr>
                                <td>Fernando Dodino</td>
                                <td>fernand...</td>
                                <td>1</td>
                            </tr>
                            
                            <tr>
                                <td>Flbulgarelli</td>
                                <td>Flbulga...</td>
                                <td>1</td>
                            </tr>
                            
                            <tr>
                                <td>Mariana</td>
                                <td>mmatos8...</td>
                                <td>3</td>
                            </tr>
                            
                            <tr>
                                <td>Mmatos</td>
                                <td>Mmatos@...</td>
                                <td>4</td>
                            </tr>
                            
                            </tbody>
                        </table>
                    </div>
                </div>

                <table style="margin-left: 15px;">
                    <thead>
                    <tr>
                        <th>Hash</th>
                        <th>Time</th>
                        <th>Name</th>
                        <th>Mail</th>
                        <th>Subject</th>
                    <tr>
                    </thead>

                    <tbody>
                    
                    <tr>
                        <td>d98f89c5</td>
                        <td>Fri Sep 11 17:27:00 2020 -0300</td>
                        <td>GitHub</td>
                        <td>noreply...</td>
                        <td>Arreglo y explico un poco más el ejemplo con times</td>
                    </tr>
                    
                    <tr>
                        <td>b3cafc87</td>
                        <td>Thu Sep 26 17:46:23 2019 -0300</td>
                        <td>Fernando Dodino</td>
                        <td>fernand...</td>
                        <td>closures enhancements | ts articles added</td>
                    </tr>
                    
                    <tr>
                        <td>7014ec91</td>
                        <td>Fri Sep 8 12:48:12 2017 -0300</td>
                        <td>GitHub</td>
                        <td>noreply...</td>
                        <td>Agrego ejemplo para hablar de contextos y self</td>
                    </tr>
                    
                    <tr>
                        <td>7912f4db</td>
                        <td>Thu Sep 7 20:29:22 2017 -0300</td>
                        <td>GitHub</td>
                        <td>noreply...</td>
                        <td>Update bloques.md</td>
                    </tr>
                    
                    <tr>
                        <td>bef5abaa</td>
                        <td>Thu Feb 2 19:24:04 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>build up initial migration with old commits</td>
                    </tr>
                    
                    </tbody>
                </table>

            </div>
        </li>
    </ul> -->

</div>


</div>


<div id="footer">
    <div class="columns small-12 medium-12 large-12">
        © 2025 - Uqbar Foundation
    </div>
</div>

<script>
    'use strict';
</script>

<script src="/assets/jquery-aa71a7b50270602be524223735204e4e.js"></script>
<script src="/assets/jquery.min-92bca385e77eff06fdfc99d71ff5d9cb.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>

<script src="/assets/foundation/foundation-9cdbe0bbce183118de08f9938e53d976.js"></script>
<script src="/assets/foundation/foundation.abide-89a2bdc8d7b0219f70b26edf2ae6887e.js"></script>
<script src="/assets/foundation/foundation.accordion-fb975cac4e1d51205357ccef64ad87f4.js"></script>
<script src="/assets/foundation/foundation.alert-09f0ede105a8181ae99c1e952f89ca3b.js"></script>
<script src="/assets/foundation/foundation.clearing-1720b58085d63e88f45a453bb9ad3e3b.js"></script>
<script src="/assets/foundation/foundation.dropdown-644acf98749f084fdf912c4b00957f31.js"></script>
<script src="/assets/foundation/foundation.equalizer-97288e933d9acc43fab592768c628ba6.js"></script>
<script src="/assets/foundation/foundation.interchange-083c4df6919a083e985b5e687d5c30b9.js"></script>
<script src="/assets/foundation/foundation.joyride-c8c49db46553294043e6ec5c19e1285b.js"></script>
<script src="/assets/foundation/foundation.magellan-2fb6e4d1e4284a920b3a7d892e2cb54c.js"></script>
<script src="/assets/foundation/foundation.offcanvas-63af9a0eca0822c6f6a77ba0eb3dd7ec.js"></script>
<script src="/assets/foundation/foundation.orbit-79b5540e0f58a265fd959aaf18fc2345.js"></script>
<script src="/assets/foundation/foundation.reveal-620cbbd491fb6eaf8dc057949a254e29.js"></script>
<script src="/assets/foundation/foundation.slider-e5da59a7bd13309d315a6a95e0654b35.js"></script>
<script src="/assets/foundation/foundation.tab-9ea3a242acf982f76f891ac5e32aa92a.js"></script>
<script src="/assets/foundation/foundation.tooltip-926551742e978e4456aa7ca8c6ffe334.js"></script>
<script src="/assets/foundation/foundation.topbar-fa936a3a88514cb2c51c4ccf3fefaeb0.js"></script>

<script src="/assets/jquery.cookie-600df63e64417ec0c172cd3580ffe4f3.js"></script>
<!-- Script pointing to jekyll-search.js -->
<script src="/assets/jekyll-search-db248d3bf113e122870c09fd6d9b0592.js"></script>

<script>
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: "/search.json"
    });

    $(document).foundation();

</script>

<!-- prism.js -->
<script src="/assets/prism-193ebecb65a347c425ecdb3c4592fd0e.js"></script>
</body>
</html>

<!DOCTYPE html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<html class="no-js" lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    


  <title>Reflection</title>
  <meta property="og:title" content="Reflection" />






<link rel="canonical" href="wiki.uqbar.org/wiki/articles/reflection.html" />
<meta property="og:url" content="wiki.uqbar.org/wiki/articles/reflection.html" />
<meta property="og:site_name" content="uqbar-wiki" />
<meta name="application-name" content="uqbar-wiki"/>

<meta property="og:updated_time" content=" 2025-07-10T21:15:21-03:00" />






  <meta property="keywords" content="" />











    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" >
    <link type="text/plain" rel="author" href="/humans.txt"/>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">    

    <link rel="stylesheet" href="/assets/app-1e946f931f577cd478e6e6610915be9d.css">
    <style>
        .navbar {
            -webkit-backface-visibility: hidden;
        }
    </style>
</head>

<body>

<nav class="top-bar navbar-background" data-topbar>
    <ul class="title-area">
        <li class="name">
            <div id="pagetitle"><img alt="Uqbar" src="/img/proyecto-uqbarwiki.png" height="100px"
                    width="100px" /></div>
        </li>
    </ul>
    <ul class="left">
        <div class="mobile">
            <div class="navbar-buttons">
                <div class="navbar-icon-link">
                    <a href="/"><img alt="Home" src="/img/wiki/home-2.png" height="25px"
                            width="25px" title="Home" /></a>
                </div>
                <div class="navbar-icon-link">
                    <a href="/articles"><img alt="Artículos" src="/img/wiki/list.png"
                            height="25px" width="25px" title="Artículos" /></a>
                </div>
            </div>
        </div>
    </ul>
</nav>

<div class="column small-0 medium-2 large-2 sidebar" style="margin-top: 5px;">
        <!-- Html Elements for Search -->
<div id="search-container">
    <input type="text" id="search-input" name="search-input" placeholder="Artículo a buscar...">
    <ul id="results-container"></ul>
    <hr>
</div>

        <div class="not-mobile">
                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" title="Links" role="menu">
                        <li class="button" role="menuitem"><a href="/" class="sidebar-link"><img
                                                alt="Home" src="/img/wiki/home-2.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Home</a></li>
                        <li class="button" role="menuitem"><a href="/articles" class="sidebar-link"><img
                                                alt="Artículos" src="/img/wiki/list.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Artículos</a></li>
                </ul>

                <hr>

                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" role="menu">
                        <img src="/img/wiki/utn.png" alt="UTN" height="40px" width="40px" title="UTN" />
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/paradigmas-de-programacion.html">Paradigmas
                                        de
                                        programación</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/design-temario.html">Diseño de
                                        Sistemas</a>
                        </li>
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/tecnicas-avanzadas-de-programacion.html">Técnicas
                                        avanzadas de programación</a></li>
                        <br>
                        <img src="/img/wiki/unsam.png" alt="UNSAM" height="40px" width="40px"
                                title="UNSAM" />
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo2-temario.html">Algoritmos
                                        II</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo3-temario.html">Algoritmos
                                        III</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/phm-temario.html">Programación
                                        con
                                        Herramientas
                                        Modernas</a></li>
                </ul>
        </div>
</div>

<div class="column small-12 medium-10 large-10">
    <div id="article_title">
    <h1>
        <i>Reflection</i>
    </h1>
</div>



<div id="article_content">
    <p>Es un caso particular de <a href="metaprogramacion.html">metaprogramación</a>, donde “metaprogramamos” en el mismo lenguaje en que están escritos (o vamos a escribir) los programas. Es decir, todo desde el mismo lenguaje.</p>

<p>Nota de color: Inicialmente el lenguaje “pionero” en cuanto a reflection fue LISP.</p>

<p>El ejemplo más visible de esto es el caso de smalltalk, donde no existe una diferenciación entre IDE y nuestro programa. Ambos estan hechos en smalltalk, y de hecho viven en un mismo ambiente. Ambos estan construidos con objetos y pueden interactuar entre sí.</p>

<p>De hecho, muchos componentes del “IDE” Pharo son elementos de metaprogramación, y utilizan reflection para inspeccionar nuestras clases y objetos.</p>

<h2 id="tipos-de-reflection">Tipos de reflection</h2>

<p>Para esto, generalmente, es necesario contar con facilidades o herramientas específicas, digamos “soporte” del lenguaje. Entonces reflection, además, abarca los siguientes items que vamos a mencionar en esta lista:</p>

<ul>
  <li>Introspection: se refiere a la capacidad de un sistema, de analizarse a sí mismo. Algo así como la introspección humana, pero en términos de programa. Para eso, el lenguaje debe proveer ciertas herramientas, que le permitan al mismo programa, “ver” o “reflejar” cada uno de sus componentes.</li>
  <li>Self-Modification: es la capacidad de un programa de modificarse a sí mismo. Nuevamente esto requiere cierto soporte del lenguaje. Y las limitaciones van a depender de este soporte.</li>
  <li>Intercession: es la capacidad de modificar la semántica del modelo que estamos manipulando, desde el mismo lenguaje.</li>
</ul>

<p>Un MOP (MetaObject Protocol) es un framework de objetos que describe o modela un sistema de objetos. MOP sería el término correcto para lo que en java llamamos API de reflection. En realidad el API de reflection de java es un caso de MOP.</p>

<p>Dependiendo de la implementación y del lenguaje, el MOP puede soportar o no los tipos de reflection que enumeramos arriba: introspection, self-modification &amp; intercession.</p>

<h2 id="introspection">Introspection</h2>

<p>Se refiere a poder obtener información acerca de los elementos de nuestro programa: clases, fields, métodos, funciones, predicados (en otros paradigmas).</p>

<p>La capacidad de introspection es la más común en los MOP’s. Digamos que es la más “simple” de implementar, comparándolas con los otros tipos de reflection.</p>

<p>Veamos algunas herramientas que nos dan los lenguajes Java y Smalltalk (Pharo):</p>

<p><strong>Información estática:</strong></p>

<p><code class="language-plaintext highlighter-rouge">Para obtener la clase de un objeto:</code>
<code class="language-plaintext highlighter-rouge">   en Java: getClass</code>
<code class="language-plaintext highlighter-rouge">   en Pharo: class</code>
<code class="language-plaintext highlighter-rouge">   </code>
<code class="language-plaintext highlighter-rouge">En la clase class están los métodos:</code>
<code class="language-plaintext highlighter-rouge">   en Java: getMethods, getDeclaredMethods, getFields, getConstructors, getMethod, getSuperclass</code>
<code class="language-plaintext highlighter-rouge">   en Pharo: instVariables, methodDictionary, superclass</code></p>

<p><strong>Información dinámica:</strong></p>

<p><code class="language-plaintext highlighter-rouge">Obtener el valor de un field:</code>
<code class="language-plaintext highlighter-rouge">   en Java: unField.get(unObjeto)</code>
<code class="language-plaintext highlighter-rouge">   en Pharo: unObjeto instVarNamed: fieldName</code>
<code class="language-plaintext highlighter-rouge">Setear el valor de un field:</code>
<code class="language-plaintext highlighter-rouge">   en Java: unField.set(unObjeto, unValor)</code>
<code class="language-plaintext highlighter-rouge">   en Pharo: unObjeto instVarNamed: fieldName put: unValor</code>
<code class="language-plaintext highlighter-rouge">Invocar un método:</code>
<code class="language-plaintext highlighter-rouge">   en Java: unMethod.invoke(unObjeto, parametro1, parametro2, ...)</code>
<code class="language-plaintext highlighter-rouge">   en Pharo: unObjeto perform: #selector withArguments: listaDeParametros</code>
<code class="language-plaintext highlighter-rouge">Crear una instancia:</code>
<code class="language-plaintext highlighter-rouge">   en Java: unConstructor.invoke(parametro1, parametro2, ...) o unaClase.newInstance()</code>
<code class="language-plaintext highlighter-rouge">   en Pharo: unaClase new    </code></p>

<h2 id="self-modification">Self-modification</h2>

<p>Supongamos que queremos hacer el refactor <strong>extract superclass</strong>, para esto vamos a usar self-modification en Pharo, donde modificar el metamodelo usando el mismo lenguaje es algo cotidiano por ejemplo, para crear una clase usamos el template que nos provee el System Browser:</p>

<p><code class="language-plaintext highlighter-rouge"> Object subclass: #NameOfSubclass</code>
<code class="language-plaintext highlighter-rouge">   instanceVariableNames: ''</code>
<code class="language-plaintext highlighter-rouge">   classVariableNames: ''</code>
<code class="language-plaintext highlighter-rouge">   poolDictionaries: ''</code>
<code class="language-plaintext highlighter-rouge">   category: ''.</code></p>

<p>que no es más que un mensaje que se le manda a la clase Object.</p>

<p>Lo que hacemos es, dada una clase, crear una super clase a partir de ella, diciéndole el nombre de le nueva clase, las variables de instancia que quiero que tenga, los métodos que quiero que tenga. Así es como nos gustaría poder usarlo:</p>

<p><code class="language-plaintext highlighter-rouge">SimpleExtractSuperclassRefactoring </code>
<code class="language-plaintext highlighter-rouge">  extractSuperclass: #Guerrero</code>
<code class="language-plaintext highlighter-rouge">  withInstanceVariables: Soldado instVarNames</code>
<code class="language-plaintext highlighter-rouge">  andMethods: (Soldado selectors difference: #(paso fuerza))</code>
<code class="language-plaintext highlighter-rouge">  fromClass: Soldado.</code></p>

<p>El resultado de esta prueba debería ser crear una clase Guerrero, a partir de otra clase Soldado ya existente. Guerrero va a ser superclase de Soldado y va a tener todas las variables de instancia que tiene Soldado (le podríamos especificar cuáles variables de instancia queremos ponerle, pero por simplicidad, le pasamos todas). También vamos a mover todos los métodos de Soldado, excepto paso y fuerza.</p>

<p>Por supuesto, nuestro refactor debe ser independiente del dominio de los guerreros. Nuestro metaprograma sería básicamente (obviando accessors):</p>

<p><code class="language-plaintext highlighter-rouge">#SimpleExtractSuperclassRefactoring class</code>
<code class="language-plaintext highlighter-rouge">&gt;&gt; extractSuperclass: newSuperClassName withInstanceVariables: instanceVariableNames andMethods: selectorsToMove fromClass: aClass</code>
<code class="language-plaintext highlighter-rouge"> self new</code>
<code class="language-plaintext highlighter-rouge">   target: aClass;</code>
<code class="language-plaintext highlighter-rouge">   superClassName: newSuperClassName;</code>
<code class="language-plaintext highlighter-rouge">   instanceVariableNames: instanceVariableNames;</code>
<code class="language-plaintext highlighter-rouge">   selectors: selectorsToMove; </code>
<code class="language-plaintext highlighter-rouge">   execute.</code></p>

<p><code class="language-plaintext highlighter-rouge">#SimpleExtractSuperclassRefactoring</code>
<code class="language-plaintext highlighter-rouge">&gt;&gt; execute</code>
<code class="language-plaintext highlighter-rouge">  self createSuperClass.</code>
<code class="language-plaintext highlighter-rouge">  self moveInstanceVariables.</code>
<code class="language-plaintext highlighter-rouge">  self moveMethods.</code></p>

<p><code class="language-plaintext highlighter-rouge">&gt;&gt; createSuperClass</code>
<code class="language-plaintext highlighter-rouge">  self targetSuperClass: (self target superclass</code>
<code class="language-plaintext highlighter-rouge">                                     subclass: self superClassName</code>
<code class="language-plaintext highlighter-rouge">                                     instanceVariableNames: ''</code>
<code class="language-plaintext highlighter-rouge">                                     classVariableNames: ''</code>
<code class="language-plaintext highlighter-rouge">                                     poolDictionaries: ''</code>
<code class="language-plaintext highlighter-rouge">                                     category: self target category).</code>
<code class="language-plaintext highlighter-rouge">  self targetSuperClass subclass: self target name</code>
<code class="language-plaintext highlighter-rouge">                        instanceVariableNames: self target instanceVariablesString</code>
<code class="language-plaintext highlighter-rouge">                        classVariableNames: self target classVariablesString</code>
<code class="language-plaintext highlighter-rouge">                        poolDictionaries: '' "Ahora no nos importa, pero habría que copiarlo también para que no se pierda"</code>
<code class="language-plaintext highlighter-rouge">                        category: self target category.</code></p>

<p><code class="language-plaintext highlighter-rouge">&gt;&gt; moveInstanceVariables</code>
<code class="language-plaintext highlighter-rouge">  self instanceVariableNames do: [:instVarName |</code>
<code class="language-plaintext highlighter-rouge">    self target removeInstVarNamed: instVarName.</code>
<code class="language-plaintext highlighter-rouge">    self targetSuperClass addInstVarNamed: instVarName. ]</code></p>

<p><code class="language-plaintext highlighter-rouge">&gt;&gt; moveMethods</code>
<code class="language-plaintext highlighter-rouge">  self selectors do: [:selector |</code>
<code class="language-plaintext highlighter-rouge">    self targetSuperClass compile: (self target &gt;&gt; selector) getSource.</code>
<code class="language-plaintext highlighter-rouge">    self target removeSelector: selector. ]</code>
<code class="language-plaintext highlighter-rouge"> </code></p>

<p>Algunos métodos de self-modification que usamos:</p>

<ul>
  <li><strong>Agregar un método:</strong> unaClase compile: ‘…código del método’</li>
  <li><strong>Borrar un método:</strong> unaClase removeSelector: #selector</li>
  <li><strong>Agregar una variable de instancia:</strong> unaClase addInstVarNamed: ‘nombre de la variable’</li>
  <li><strong>y para borrarla:</strong> unaClase removeInstVarNamed: ‘nombre de la variable’</li>
</ul>


</div>





<div id="article_metadata">
    <!-- <p><i>Latest update on February 02, 2017 by
        Ernesto Bossi</i></p>

    <ul class="accordion" data-accordion>
        <li class="accordion-navigation">
            <a href="#panel1a">Page History, Meta information</a>

            <div id="panel1a" class="content">

                <div class="rows">
                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Page Commits</th>
                                <th>Page Additions</th>
                                <th>Page Deletions</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                <td>3</td>
                                <td>133</td>
                                <td>2</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Commits</th>
                            <tr>
                            </thead>

                            <tbody>
                            
                            <tr>
                                <td>Ernesto Bossi</td>
                                <td>bossi.e...</td>
                                <td>1</td>
                            </tr>
                            
                            <tr>
                                <td>Mmatos</td>
                                <td>Mmatos@...</td>
                                <td>2</td>
                            </tr>
                            
                            </tbody>
                        </table>
                    </div>
                </div>

                <table style="margin-left: 15px;">
                    <thead>
                    <tr>
                        <th>Hash</th>
                        <th>Time</th>
                        <th>Name</th>
                        <th>Mail</th>
                        <th>Subject</th>
                    <tr>
                    </thead>

                    <tbody>
                    
                    <tr>
                        <td>bef5abaa</td>
                        <td>Thu Feb 2 19:24:04 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>build up initial migration with old commits</td>
                    </tr>
                    
                    <tr>
                        <td>cf0f870b</td>
                        <td>Thu Feb 2 19:13:33 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>Revision without comments imported from MediaWiki</td>
                    </tr>
                    
                    <tr>
                        <td>b517ab56</td>
                        <td>Thu Feb 2 19:13:33 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>Página creada con «Es un caso particular de [[metaprogramación]], donde "metaprogramamos" en el mismo lenguaje en que están escritos (o vamos a escribir) los programas. Es decir, todo desde...»</td>
                    </tr>
                    
                    </tbody>
                </table>

            </div>
        </li>
    </ul> -->

</div>


</div>


<div id="footer">
    <div class="columns small-12 medium-12 large-12">
        © 2025 - Uqbar Foundation
    </div>
</div>

<script>
    'use strict';
</script>

<script src="/assets/jquery-aa71a7b50270602be524223735204e4e.js"></script>
<script src="/assets/jquery.min-92bca385e77eff06fdfc99d71ff5d9cb.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>

<script src="/assets/foundation/foundation-9cdbe0bbce183118de08f9938e53d976.js"></script>
<script src="/assets/foundation/foundation.abide-89a2bdc8d7b0219f70b26edf2ae6887e.js"></script>
<script src="/assets/foundation/foundation.accordion-fb975cac4e1d51205357ccef64ad87f4.js"></script>
<script src="/assets/foundation/foundation.alert-09f0ede105a8181ae99c1e952f89ca3b.js"></script>
<script src="/assets/foundation/foundation.clearing-1720b58085d63e88f45a453bb9ad3e3b.js"></script>
<script src="/assets/foundation/foundation.dropdown-644acf98749f084fdf912c4b00957f31.js"></script>
<script src="/assets/foundation/foundation.equalizer-97288e933d9acc43fab592768c628ba6.js"></script>
<script src="/assets/foundation/foundation.interchange-083c4df6919a083e985b5e687d5c30b9.js"></script>
<script src="/assets/foundation/foundation.joyride-c8c49db46553294043e6ec5c19e1285b.js"></script>
<script src="/assets/foundation/foundation.magellan-2fb6e4d1e4284a920b3a7d892e2cb54c.js"></script>
<script src="/assets/foundation/foundation.offcanvas-63af9a0eca0822c6f6a77ba0eb3dd7ec.js"></script>
<script src="/assets/foundation/foundation.orbit-79b5540e0f58a265fd959aaf18fc2345.js"></script>
<script src="/assets/foundation/foundation.reveal-620cbbd491fb6eaf8dc057949a254e29.js"></script>
<script src="/assets/foundation/foundation.slider-e5da59a7bd13309d315a6a95e0654b35.js"></script>
<script src="/assets/foundation/foundation.tab-9ea3a242acf982f76f891ac5e32aa92a.js"></script>
<script src="/assets/foundation/foundation.tooltip-926551742e978e4456aa7ca8c6ffe334.js"></script>
<script src="/assets/foundation/foundation.topbar-fa936a3a88514cb2c51c4ccf3fefaeb0.js"></script>

<script src="/assets/jquery.cookie-600df63e64417ec0c172cd3580ffe4f3.js"></script>
<!-- Script pointing to jekyll-search.js -->
<script src="/assets/jekyll-search-db248d3bf113e122870c09fd6d9b0592.js"></script>

<script>
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: "/search.json"
    });

    $(document).foundation();

</script>

<!-- prism.js -->
<script src="/assets/prism-193ebecb65a347c425ecdb3c4592fd0e.js"></script>
</body>
</html>

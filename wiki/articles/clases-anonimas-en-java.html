<!DOCTYPE html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<html class="no-js" lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    


  <title>Clases anonimas en java</title>
  <meta property="og:title" content="Clases anonimas en java" />






<link rel="canonical" href="wiki.uqbar.org/wiki/articles/clases-anonimas-en-java.html" />
<meta property="og:url" content="wiki.uqbar.org/wiki/articles/clases-anonimas-en-java.html" />
<meta property="og:site_name" content="uqbar-wiki" />
<meta name="application-name" content="uqbar-wiki"/>

<meta property="og:updated_time" content=" 2025-07-10T21:15:21-03:00" />






  <meta property="keywords" content="" />











    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" >
    <link type="text/plain" rel="author" href="/humans.txt"/>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">    

    <link rel="stylesheet" href="/assets/app-1e946f931f577cd478e6e6610915be9d.css">
    <style>
        .navbar {
            -webkit-backface-visibility: hidden;
        }
    </style>
</head>

<body>

<nav class="top-bar navbar-background" data-topbar>
    <ul class="title-area">
        <li class="name">
            <div id="pagetitle"><img alt="Uqbar" src="/img/proyecto-uqbarwiki.png" height="100px"
                    width="100px" /></div>
        </li>
    </ul>
    <ul class="left">
        <div class="mobile">
            <div class="navbar-buttons">
                <div class="navbar-icon-link">
                    <a href="/"><img alt="Home" src="/img/wiki/home-2.png" height="25px"
                            width="25px" title="Home" /></a>
                </div>
                <div class="navbar-icon-link">
                    <a href="/articles"><img alt="Artículos" src="/img/wiki/list.png"
                            height="25px" width="25px" title="Artículos" /></a>
                </div>
            </div>
        </div>
    </ul>
</nav>

<div class="column small-0 medium-2 large-2 sidebar" style="margin-top: 5px;">
        <!-- Html Elements for Search -->
<div id="search-container">
    <input type="text" id="search-input" name="search-input" placeholder="Artículo a buscar...">
    <ul id="results-container"></ul>
    <hr>
</div>

        <div class="not-mobile">
                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" title="Links" role="menu">
                        <li class="button" role="menuitem"><a href="/" class="sidebar-link"><img
                                                alt="Home" src="/img/wiki/home-2.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Home</a></li>
                        <li class="button" role="menuitem"><a href="/articles" class="sidebar-link"><img
                                                alt="Artículos" src="/img/wiki/list.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Artículos</a></li>
                </ul>

                <hr>

                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" role="menu">
                        <img src="/img/wiki/utn.png" alt="UTN" height="40px" width="40px" title="UTN" />
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/paradigmas-de-programacion.html">Paradigmas
                                        de
                                        programación</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/design-temario.html">Diseño de
                                        Sistemas</a>
                        </li>
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/tecnicas-avanzadas-de-programacion.html">Técnicas
                                        avanzadas de programación</a></li>
                        <br>
                        <img src="/img/wiki/unsam.png" alt="UNSAM" height="40px" width="40px"
                                title="UNSAM" />
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo2-temario.html">Algoritmos
                                        II</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo3-temario.html">Algoritmos
                                        III</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/phm-temario.html">Programación
                                        con
                                        Herramientas
                                        Modernas</a></li>
                </ul>
        </div>
</div>

<div class="column small-12 medium-10 large-10">
    <div id="article_title">
    <h1>
        <i>Clases anonimas en java</i>
    </h1>
</div>



<div id="article_content">
    <h2 id="motivación-ausencia-de-bloques">Motivación: ausencia de bloques</h2>

<p>La motivación más importante para entender las clases anónimas es la ausencia <a href="bloques.html"> bloques (o closures)</a> en el lenguaje Java. Java 8 recién es la primer versión que introduce un mecanismo de bloques (ver <a href="lambdas-en-java-8.html">Lambdas_en_Java_8</a>)</p>

<p>Veamos un ejemplo:</p>

<p>En smalltalk para seleccionar los elementos de una colección que cumplen cierta condición enviamos el mensaje “select:” Por ejemplo, para obtener las personas mayores de 18 años haríamos:</p>

<p><code class="language-plaintext highlighter-rouge">personas select: [:p | p edad &gt; 18 ]</code></p>

<h2 id="ejemplo-en-java-sin-clases-anónimas">Ejemplo en Java Sin clases anónimas</h2>

<p>Cómo haríamos eso en java ?</p>

<p>Primero que nada no existe un método “select” ni nada parecido en las colecciones (interfaz Collection). Así que tenemos que hacer el método nosotros.</p>

<p>Hacemos un método estático como una utilidad, al que le tenemos que pasar la colección como parámetro.</p>

<p><code class="language-plaintext highlighter-rouge">public class CollectionUtils {</code>
<code class="language-plaintext highlighter-rouge">   public static Collection</code><T>` select(Collection`<T>` coleccion, &lt;&lt;&lt;&lt; condicion &gt;&gt;&gt;&gt;) {`
`       ...`
`   }`
`}`</T></T></p>

<p>Obviamente también tenemos que pasarle de alguna forma la condición !</p>

<p>Ahora bien, en Java no existen los bloques o closures, con lo cual, la única opción que tenemos es pasar un objeto. Así que tenemos que modelar el concepto de <strong>Condicion</strong>.</p>

<p><code class="language-plaintext highlighter-rouge">public interface Condicion {</code>
<code class="language-plaintext highlighter-rouge">  public boolean cumple(Object obj);</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Como la condición es lo que va a tener que implementar el “usuario” de este método, es decir quien quiera filtrar una colección, la definimos como una Interfaz de java, para no poner una restricción sobre una superclase (la otra opción sería que fuera una clase abstracta).</p>

<table>
  <tbody>
    <tr>
      <td>Fíjense que es un objeto que tiene una [<a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">http://en.wikipedia.org/wiki/Single_responsibility_principle</a></td>
      <td>[única responsabilidad]] bien identificada. Dado un objeto que le paso por parámetro me sabe decir si cumple o no con la condición.</td>
    </tr>
  </tbody>
</table>

<p>Entonces hacemos una primer implementación de nuestro ejemplo de filtrar mayores de 18 creando una clase normal que implemente esa interfaz.</p>

<p><code class="language-plaintext highlighter-rouge">class MayorDe18Condicion implements Condicion {</code>
<code class="language-plaintext highlighter-rouge">   @Override</code>
<code class="language-plaintext highlighter-rouge">   public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">       return ((Persona) obj).getEdad() &gt; 18;</code>
<code class="language-plaintext highlighter-rouge">   }</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Y para filtrar una colección</p>

<p><code class="language-plaintext highlighter-rouge">personas = ...</code>
<code class="language-plaintext highlighter-rouge">CollectionUtils.select(personas, new MayorDe18Condicion());</code></p>

<p>Incluso si usamos los imports estáticos de Java, podemos importar métodos estáticos de una clase, para no tener que llamarlos con el nombre de la clase, punto, y el método. Quedaría</p>

<p><code class="language-plaintext highlighter-rouge">import static org.uqbar-project.CollectionUtils.select;</code>
<code class="language-plaintext highlighter-rouge">...</code>
<code class="language-plaintext highlighter-rouge">personas = ...</code>
<code class="language-plaintext highlighter-rouge">select(personas, new MayorDe18Condicion());</code></p>

<p>Ok, igualmente sigue siendo mucho más burocrático y pesado que la implementación en smalltalk.</p>

<p>Igualmente, lo que más nos molesta es que tenemos que crear una nueva clase por cada condición por la que querramos filtrar. Es bastante molesto eso. Ejemplo, queremos filtrar las personas casadas..</p>

<p><code class="language-plaintext highlighter-rouge">class EsCasadaCondicion implements Condicion {</code>
<code class="language-plaintext highlighter-rouge">   @Override</code>
<code class="language-plaintext highlighter-rouge">   public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">       return ((Persona) obj).esCasada();</code>
<code class="language-plaintext highlighter-rouge">   }</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Y luego</p>

<p><code class="language-plaintext highlighter-rouge"> casados = select(personas, new EsCasadaCondicion());</code></p>

<h2 id="accediendo-a-referencias-de-otro-objeto-sin-anónimas">Accediendo a referencias de otro Objeto (sin anónimas)</h2>

<p>Qué pasa si ahora queremos desde la condición utilizar una estado interno del objeto que está filtrando. Por ejemplo, desde una Empresa, queremos obtener sus empleados. Para eso, filtramos de la colección de personas a aquellas que trabajen para esta empresa.</p>

<p><code class="language-plaintext highlighter-rouge">public class Empresa {</code>
<code class="language-plaintext highlighter-rouge">   </code>
<code class="language-plaintext highlighter-rouge">   public Collection getEmpleados() {</code>
<code class="language-plaintext highlighter-rouge">       return select(personas, new TrabajaEnCondicion(this));</code>
<code class="language-plaintext highlighter-rouge">   }     </code>
<code class="language-plaintext highlighter-rouge">   </code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Como se ve necesitamos pasarle la empresa a la condición. Es una condición que tiene estado. En este caso se pasa a sí mismo todo el objeto Empresa.</p>

<p><code class="language-plaintext highlighter-rouge">class TrabajaEnCondicion implements Condicion {</code>
<code class="language-plaintext highlighter-rouge">   private Empresa empresa;</code>
<code class="language-plaintext highlighter-rouge">   public TrabajaEnCondicion(Empresa empresa) {</code>
<code class="language-plaintext highlighter-rouge">       this.empresa = empresa;</code>
<code class="language-plaintext highlighter-rouge">   }</code>
<code class="language-plaintext highlighter-rouge">   @Override</code>
<code class="language-plaintext highlighter-rouge">   public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">       return ((Persona) obj).getEmpleador() == this.empresa;</code>
<code class="language-plaintext highlighter-rouge">   }</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Cada vez más código ! :S Necesitamos declarar el atributo (estado interno) y recibirlo en el constructor.</p>

<p>Bastante burocrático nuévamente. En smalltalk sería</p>

<p><code class="language-plaintext highlighter-rouge"> Empresa&gt;&gt;empleados</code>
<code class="language-plaintext highlighter-rouge">     ^personas select: [:p | (p empleador) = self]</code></p>

<h2 id="accediendo-a-referencias-locales-sin-anónimas">Accediendo a referencias locales (sin anónimas)</h2>

<p>Introducimos otra variante, otra situación normal.</p>

<p>Queremos poder preguntarle a la empresa cuales son todos los empleados con más de “x” años. Es decir, no tenemos un valor único y fijo como antes, de 18, sino que lo recibimos como parámetro.</p>

<p><code class="language-plaintext highlighter-rouge"> public Collection getEmpleadosMayoresA(int anios) {</code>
<code class="language-plaintext highlighter-rouge">      return select(this.getEmpleados(), new MayoresA(anios));</code>
<code class="language-plaintext highlighter-rouge"> }</code></p>

<p>De nuevo, se ve acá que tenemos que pasarle todo el estado que necesite la condición, como parámetro en la construcción. En este caso es un parámetro. Podría ser incluso una variable local.</p>

<h2 id="aparece-la-clase-anónima">Aparece la Clase Anónima</h2>

<p>De lo anterior podemos concluir que la Condición en general va a ser un objetito más bien descartable, que lo uso para filtrar una colección en particular y luego lo descarto (más aún si tiene estado, no puedo reutilizar la condición “mayor a &lt;23&gt;” si luego tengo que buscar los mayores a &lt;50&gt;).</p>

<p>Además, de que vamos a tener muchísimas clases implementaciones, según cuántos criterios de filtrado tengamos en el sistema.</p>

<p>Esto es porque en realidad lo que necesitaríamos es expresar un pedacito de código nada más.</p>

<p>Bien, como java no tiene bloques, para apalear un poco este problema, introduce la idea de <strong>clase anónima interna</strong> (del inglés anonymous inner classes). La idea es que en el cuerpo de un método pueda escribir una clase ahí mismo, “inline”, es decir sin necesidad de hacerlo en otro archivo. Como voy a implementar con esto un pedacito de código “descartable”, no hace falta que le ponga nombre a esta clase.</p>

<p>Entonces, diréctamente instancio la interfaz (o clase abstracta), abro llaves, y ahí mismo la implemento.</p>

<p>Ejemplo:</p>

<p><code class="language-plaintext highlighter-rouge">public Collection getMayoresDe18() {</code>
<code class="language-plaintext highlighter-rouge">   Condicion mayoresA18 = new Condicion() {</code>
<code class="language-plaintext highlighter-rouge">       @Override</code>
<code class="language-plaintext highlighter-rouge">       public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">           return ((Persona) obj).getEdad() &gt; 18;</code>
<code class="language-plaintext highlighter-rouge">       }</code>
<code class="language-plaintext highlighter-rouge">   };</code>
<code class="language-plaintext highlighter-rouge">   return select(personas, mayoresA23);</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Este ejemplo es equivalente al primero que hicimos. Nótese que estamos haciendo</p>

<p><code class="language-plaintext highlighter-rouge">variable =  </code><nueva clase="" anónima=""></nueva></p>

<p>La sintaxis es</p>

<p><code class="language-plaintext highlighter-rouge"> new Interface() {</code>
<code class="language-plaintext highlighter-rouge">    </code>
<code class="language-plaintext highlighter-rouge">    // implementación de la interface   </code>
<code class="language-plaintext highlighter-rouge"> </code>
<code class="language-plaintext highlighter-rouge"> }</code></p>

<p>Eso me da un objeto, que en este primer ejemplo lo asignamos a una variable local. Podríamos incluso no usar la variable local y diréctamente crearla para pasarla por parámetro al “select”.</p>

<p><code class="language-plaintext highlighter-rouge">public Collection getMayoresDe18() {</code>
<code class="language-plaintext highlighter-rouge">   return select(personas, new Condicion() {</code>
<code class="language-plaintext highlighter-rouge">       @Override</code>
<code class="language-plaintext highlighter-rouge">       public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">           return ((Persona) obj).getEdad() &gt; 18;</code>
<code class="language-plaintext highlighter-rouge">       }</code>
<code class="language-plaintext highlighter-rouge">     }</code>
<code class="language-plaintext highlighter-rouge">   );</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Fíjense que es lo mismo, simplemente metimos todo el código desde el “new Cond… hasta el cierre de llaves de la calse, en el lugar del parámetro.</p>

<p>Así, si lo miran con cariño (mucho cariño), se parece un poco a la implementación con bloques.</p>

<p>Ojo, las reglas son las mismas que cuando definimos una clase en otro archivo. Como que:</p>

<ul>
  <li>nos fuerza a implementar todos los métodos abstractos.</li>
  <li>podemos sobrescribir un método (en caso de hacer una subclase anónima de una clase abstracta).</li>
  <li>podemos llamar a super (pasa clase abstracta también).</li>
  <li>etc.</li>
</ul>

<p>Sin embargo, a diferencia de una clase normal tiene algunas particularidades.</p>

<h2 id="acceso-a-la-instancia-contenedora-clasethis">Acceso a la instancia contenedora (Clase.this)</h2>

<p>La clase anónima además de poder acceder a su estado interno y mandarle mensajes a los parámetros que recibe en métodos, “ve” y puede también acceder al estado interno y mandarle mensajes a la instancia de la clase que la creó (es decir donde está el código definido).</p>

<p>Rehagamos el ejemplo de la empresa</p>

<p><code class="language-plaintext highlighter-rouge">  public class Empresa {</code>
<code class="language-plaintext highlighter-rouge">      public Collection getEmpleados() {</code>
<code class="language-plaintext highlighter-rouge">          return select(personas, new Condicion() {</code>
<code class="language-plaintext highlighter-rouge">              @Override</code>
<code class="language-plaintext highlighter-rouge">              public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">                   return ((Persona) obj).getEmpleador() == Empresa.this;</code>
<code class="language-plaintext highlighter-rouge">              }</code>
<code class="language-plaintext highlighter-rouge">          });</code>
<code class="language-plaintext highlighter-rouge">      }</code>
<code class="language-plaintext highlighter-rouge">  }</code></p>

<p>Ven que acá estamos necesitamos comparar el empleador de la persona con la nosotros mismos. El problema es que estamos teniendo código dentro de una clase (anónima de Condicion) que está dentro de otra clase (Empresa). Entonces, no existe un único “this”. Tenemos dos. Como regla para toda clase anónima</p>

<ul>
  <li><strong>this</strong>: se refiere al objeto de la clase anónima, en nuestro caso sería la instancia de Condicion.</li>
  <li><strong>ClaseContenedora.this</strong>: se refiere al objeto instancia de la clase contenedora de esta anónima. En nuestro caso la Empresa.</li>
</ul>

<p>Así podríamos mandarle mensajes también</p>

<p><code class="language-plaintext highlighter-rouge">...</code>
<code class="language-plaintext highlighter-rouge">            return Empresa.this.esExEmpleado((Persona) obj);</code>
<code class="language-plaintext highlighter-rouge">...</code></p>

<p>Donde “esExEmpleado(Persona p)” sería un método de la Empresa.</p>

<p>O también accederle a una variable de instancia</p>

<p><code class="language-plaintext highlighter-rouge">...</code>
<code class="language-plaintext highlighter-rouge">            return ((Persona p)obj).getEmpleador().getNombre().equals(Empresa.this.nombre);</code>
<code class="language-plaintext highlighter-rouge">...</code></p>

<h2 id="acceso-a-variables-locales-final">Acceso a variables locales (final)</h2>

<p>Existe una particularidad de la implementación de Java, para recrear el último caso en que usábamos un parámetro “edad” para fitrar.</p>

<p>Si escribieramos eso así:</p>

<p><code class="language-plaintext highlighter-rouge">public Collection getMayoresA(int edad) {</code>
<code class="language-plaintext highlighter-rouge">   return select(personas, new Condicion() {</code>
<code class="language-plaintext highlighter-rouge">        @Override</code>
<code class="language-plaintext highlighter-rouge">        public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">            return ((Persona) obj).getEdad() &gt; edad;</code>
<code class="language-plaintext highlighter-rouge">        }</code>
<code class="language-plaintext highlighter-rouge">   });</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Tendrímos un error de compilación al hacer “&gt; edad”, es decir al intentar acceder desde el código de la clase anónima al parámetro. Esto es porque la clase anónima si bien tiene acceso al “scope” de variables del método, solo puede acceder a aquellas variables que sean <strong>final</strong>, es decir que sean constantes, que no puedan cambiar. Esto es por una limitación de java. La solución sería agregar el modificador <strong>final</strong> al parámetro</p>

<p><code class="language-plaintext highlighter-rouge">public Collection getMayoresA(final int edad) {</code>
<code class="language-plaintext highlighter-rouge">...</code></p>

<p>Lo mismo sucede con <strong>referencias locales</strong></p>

<p><code class="language-plaintext highlighter-rouge">public Collection getMayoresAlPromedioDeEdad() {</code>
<code class="language-plaintext highlighter-rouge">   final int promedioDeEdad = this.calcularPromedioDeEdad();</code>
<code class="language-plaintext highlighter-rouge">   return select(personas, new Condicion() {</code>
<code class="language-plaintext highlighter-rouge">        @Override</code>
<code class="language-plaintext highlighter-rouge">        public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">            return ((Persona) obj).getEdad() &gt; promedioDeEdad;</code>
<code class="language-plaintext highlighter-rouge">        }</code>
<code class="language-plaintext highlighter-rouge">   });</code>
<code class="language-plaintext highlighter-rouge">} </code></p>

<p>Nótese que la referencia local “promedioDeEdad” está declarada como final.</p>

<h2 id="y-si-queremos-cambiar-el-valor-de-la-variable-local-no-puedo-hacerla-final-">Y si queremos cambiar el valor de la variable local (no puedo hacerla final) ??</h2>

<p>Bien, se puede resolver, sin embargo introduce burocracia. Para no cambiar el dominio vamos a tener que caer en un ejemplo de manejo de estructura.</p>

<p>Supongamos que queremos obtener a un diccionario o Mapa con los empleados asociados a su edad expresada en decadas. Ej:</p>

<p><code class="language-plaintext highlighter-rouge">20 &gt;  Juan(23), Jose (27), Maria (21)</code>
<code class="language-plaintext highlighter-rouge">30 &gt;  Yesi (30), Nico (36)</code>
<code class="language-plaintext highlighter-rouge">40 &gt;  Carlos (48)</code>
<code class="language-plaintext highlighter-rouge">...</code></p>

<p>Haríamos una iteración entre 20 y 70, por ejemplo, filtrando los empleados que tengan edad &gt;= i y edad &lt;= i + 9</p>

<p><code class="language-plaintext highlighter-rouge">public Map</code>&lt;Integer, Collection&gt;<code class="language-plaintext highlighter-rouge"> getEmpleadosPorEdad() {</code>
<code class="language-plaintext highlighter-rouge">    Map</code>&lt;Integer, Collection&gt;<code class="language-plaintext highlighter-rouge"> empleadosPorEdades = new HashMap</code>&lt;Integer,Collection&gt;<code class="language-plaintext highlighter-rouge">();</code>
<code class="language-plaintext highlighter-rouge">    for (int i = 20; i &lt;= 70; i += 10) {</code>
<code class="language-plaintext highlighter-rouge">         Collection empleadosEncontrados = select(this.getEmpleados(), new Condicion() {</code>
<code class="language-plaintext highlighter-rouge">              @Override</code>
<code class="language-plaintext highlighter-rouge">              public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">                  int edad = ((Persona)obj).getEdad();</code>
<code class="language-plaintext highlighter-rouge">                  return edad &gt;= i &amp;&amp; edad &lt;= (i + 9)</code>
<code class="language-plaintext highlighter-rouge">              }</code>
<code class="language-plaintext highlighter-rouge">         });</code>
<code class="language-plaintext highlighter-rouge">         empleadosPorEdades.put(i, empleadosEncontrados);</code>
<code class="language-plaintext highlighter-rouge">    }</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Bien, esto no compilaría, porque desde la clase anónima estamos usando la variable local “i”, que no es final. Si procedemos a ponerle “final” en la declaración, ahora no va a compilar el “for” en la parte del “i+=10” porque no se puede modificar una variable final. Entonces, estamos en una encrucijada. La forma de resolverla, es mover la clase anónima a otro método, donde la “i” sí la podemos declarar como final. Para esto podemos extraer el filtrado a otro método, y desde este pasarle la i como parámetro.</p>

<p><code class="language-plaintext highlighter-rouge">public Map</code>&lt;Integer, Collection&gt;<code class="language-plaintext highlighter-rouge"> getEmpleadosPorEdad() {</code>
<code class="language-plaintext highlighter-rouge">    Map</code>&lt;Integer, Collection&gt;<code class="language-plaintext highlighter-rouge"> empleadosPorEdades = new HashMap</code>&lt;Integer,Collection&gt;<code class="language-plaintext highlighter-rouge">();</code>
<code class="language-plaintext highlighter-rouge">    for (int i = 20; i &lt;= 70; i += 10) {</code>
<code class="language-plaintext highlighter-rouge">         Collection empleadosEncontrados = this.getEmpleadosEnLaDecadaDel(i);</code>
<code class="language-plaintext highlighter-rouge">         empleadosPorEdades.put(i, empleadosEncontrados);</code>
<code class="language-plaintext highlighter-rouge">    }</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Y el nuevo método:</p>

<p><code class="language-plaintext highlighter-rouge">public Collection getEmpleadosEnLaDecadaDel(final int i) {</code>
<code class="language-plaintext highlighter-rouge">    return select(this.getEmpleados(), new Condicion() {</code>
<code class="language-plaintext highlighter-rouge">          @Override</code>
<code class="language-plaintext highlighter-rouge">          public boolean cumple(Object obj) {</code>
<code class="language-plaintext highlighter-rouge">              int edad = ((Persona)obj).getEdad();</code>
<code class="language-plaintext highlighter-rouge">              return edad &gt;= i &amp;&amp; edad &lt;= (i + 9)</code>
<code class="language-plaintext highlighter-rouge">          }</code>
<code class="language-plaintext highlighter-rouge">    });</code>
<code class="language-plaintext highlighter-rouge">}</code></p>

<p>Como ven el parámetro “i” nunca cambia en este método, así que sí podemos declararlo como final. Mientras que en el for puede seguir siendo “no final”.</p>

</div>





<div id="article_metadata">
    <!-- <p><i>Latest update on February 02, 2017 by
        Ernesto Bossi</i></p>

    <ul class="accordion" data-accordion>
        <li class="accordion-navigation">
            <a href="#panel1a">Page History, Meta information</a>

            <div id="panel1a" class="content">

                <div class="rows">
                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Page Commits</th>
                                <th>Page Additions</th>
                                <th>Page Deletions</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                <td>21</td>
                                <td>93</td>
                                <td>9</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Commits</th>
                            <tr>
                            </thead>

                            <tbody>
                            
                            <tr>
                                <td>Ernesto Bossi</td>
                                <td>bossi.e...</td>
                                <td>1</td>
                            </tr>
                            
                            <tr>
                                <td>Jfernandes</td>
                                <td>Jfernan...</td>
                                <td>20</td>
                            </tr>
                            
                            </tbody>
                        </table>
                    </div>
                </div>

                <table style="margin-left: 15px;">
                    <thead>
                    <tr>
                        <th>Hash</th>
                        <th>Time</th>
                        <th>Name</th>
                        <th>Mail</th>
                        <th>Subject</th>
                    <tr>
                    </thead>

                    <tbody>
                    
                    <tr>
                        <td>bef5abaa</td>
                        <td>Thu Feb 2 19:24:04 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>build up initial migration with old commits</td>
                    </tr>
                    
                    <tr>
                        <td>904399dc</td>
                        <td>Thu Feb 2 19:09:08 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>/* Accediendo a referencias de otro Objeto (sin anónimas) */</td>
                    </tr>
                    
                    <tr>
                        <td>6eee2663</td>
                        <td>Thu Feb 2 19:09:08 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>/* Ejemplo en Java Sin clases anónimas */</td>
                    </tr>
                    
                    <tr>
                        <td>3a471031</td>
                        <td>Thu Feb 2 19:09:08 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>/* Y si queremos cambiar el valor de la variable local (no puedo hacerla final) ?? */</td>
                    </tr>
                    
                    <tr>
                        <td>aeea23c2</td>
                        <td>Thu Feb 2 19:09:08 2017 -0300</td>
                        <td>Ernesto Bossi</td>
                        <td>bossi.e...</td>
                        <td>/* Particularidades de la Implementación de Clases Anónimas */</td>
                    </tr>
                    
                    </tbody>
                </table>

            </div>
        </li>
    </ul> -->

</div>


</div>


<div id="footer">
    <div class="columns small-12 medium-12 large-12">
        © 2025 - Uqbar Foundation
    </div>
</div>

<script>
    'use strict';
</script>

<script src="/assets/jquery-aa71a7b50270602be524223735204e4e.js"></script>
<script src="/assets/jquery.min-92bca385e77eff06fdfc99d71ff5d9cb.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>

<script src="/assets/foundation/foundation-9cdbe0bbce183118de08f9938e53d976.js"></script>
<script src="/assets/foundation/foundation.abide-89a2bdc8d7b0219f70b26edf2ae6887e.js"></script>
<script src="/assets/foundation/foundation.accordion-fb975cac4e1d51205357ccef64ad87f4.js"></script>
<script src="/assets/foundation/foundation.alert-09f0ede105a8181ae99c1e952f89ca3b.js"></script>
<script src="/assets/foundation/foundation.clearing-1720b58085d63e88f45a453bb9ad3e3b.js"></script>
<script src="/assets/foundation/foundation.dropdown-644acf98749f084fdf912c4b00957f31.js"></script>
<script src="/assets/foundation/foundation.equalizer-97288e933d9acc43fab592768c628ba6.js"></script>
<script src="/assets/foundation/foundation.interchange-083c4df6919a083e985b5e687d5c30b9.js"></script>
<script src="/assets/foundation/foundation.joyride-c8c49db46553294043e6ec5c19e1285b.js"></script>
<script src="/assets/foundation/foundation.magellan-2fb6e4d1e4284a920b3a7d892e2cb54c.js"></script>
<script src="/assets/foundation/foundation.offcanvas-63af9a0eca0822c6f6a77ba0eb3dd7ec.js"></script>
<script src="/assets/foundation/foundation.orbit-79b5540e0f58a265fd959aaf18fc2345.js"></script>
<script src="/assets/foundation/foundation.reveal-620cbbd491fb6eaf8dc057949a254e29.js"></script>
<script src="/assets/foundation/foundation.slider-e5da59a7bd13309d315a6a95e0654b35.js"></script>
<script src="/assets/foundation/foundation.tab-9ea3a242acf982f76f891ac5e32aa92a.js"></script>
<script src="/assets/foundation/foundation.tooltip-926551742e978e4456aa7ca8c6ffe334.js"></script>
<script src="/assets/foundation/foundation.topbar-fa936a3a88514cb2c51c4ccf3fefaeb0.js"></script>

<script src="/assets/jquery.cookie-600df63e64417ec0c172cd3580ffe4f3.js"></script>
<!-- Script pointing to jekyll-search.js -->
<script src="/assets/jekyll-search-db248d3bf113e122870c09fd6d9b0592.js"></script>

<script>
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: "/search.json"
    });

    $(document).foundation();

</script>

<!-- prism.js -->
<script src="/assets/prism-193ebecb65a347c425ecdb3c4592fd0e.js"></script>
</body>
</html>

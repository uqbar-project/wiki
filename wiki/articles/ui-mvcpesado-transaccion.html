<!DOCTYPE html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en" prefix="og: http://ogp.me/ns#"> <![endif]-->
<html class="no-js" lang="en" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    


  <title>Arena. Manejo de transacciones.</title>
  <meta property="og:title" content="Arena. Manejo de transacciones." />






<link rel="canonical" href="wiki.uqbar.org/wiki/articles/ui-mvcpesado-transaccion.html" />
<meta property="og:url" content="wiki.uqbar.org/wiki/articles/ui-mvcpesado-transaccion.html" />
<meta property="og:site_name" content="uqbar-wiki" />
<meta name="application-name" content="uqbar-wiki"/>

<meta property="og:updated_time" content=" 2025-07-10T21:15:21-03:00" />






  <meta property="keywords" content="arena,mvc pesado,transaccion,objetos transaccionales," />











    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" >
    <link type="text/plain" rel="author" href="/humans.txt"/>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">    

    <link rel="stylesheet" href="/assets/app-1e946f931f577cd478e6e6610915be9d.css">
    <style>
        .navbar {
            -webkit-backface-visibility: hidden;
        }
    </style>
</head>

<body>

<nav class="top-bar navbar-background" data-topbar>
    <ul class="title-area">
        <li class="name">
            <div id="pagetitle"><img alt="Uqbar" src="/img/proyecto-uqbarwiki.png" height="100px"
                    width="100px" /></div>
        </li>
    </ul>
    <ul class="left">
        <div class="mobile">
            <div class="navbar-buttons">
                <div class="navbar-icon-link">
                    <a href="/"><img alt="Home" src="/img/wiki/home-2.png" height="25px"
                            width="25px" title="Home" /></a>
                </div>
                <div class="navbar-icon-link">
                    <a href="/articles"><img alt="Artículos" src="/img/wiki/list.png"
                            height="25px" width="25px" title="Artículos" /></a>
                </div>
            </div>
        </div>
    </ul>
</nav>

<div class="column small-0 medium-2 large-2 sidebar" style="margin-top: 5px;">
        <!-- Html Elements for Search -->
<div id="search-container">
    <input type="text" id="search-input" name="search-input" placeholder="Artículo a buscar...">
    <ul id="results-container"></ul>
    <hr>
</div>

        <div class="not-mobile">
                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" title="Links" role="menu">
                        <li class="button" role="menuitem"><a href="/" class="sidebar-link"><img
                                                alt="Home" src="/img/wiki/home-2.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Home</a></li>
                        <li class="button" role="menuitem"><a href="/articles" class="sidebar-link"><img
                                                alt="Artículos" src="/img/wiki/list.png" height="35px"
                                                width="35px" />&nbsp;&nbsp;&nbsp;Artículos</a></li>
                </ul>

                <hr>

                <ul class="rows small-12 medium-10 large-10 side-nav stack button-group" role="menu">
                        <img src="/img/wiki/utn.png" alt="UTN" height="40px" width="40px" title="UTN" />
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/paradigmas-de-programacion.html">Paradigmas
                                        de
                                        programación</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/design-temario.html">Diseño de
                                        Sistemas</a>
                        </li>
                        <li class="button" role="menuitem"><a
                                        href="/wiki/articles/tecnicas-avanzadas-de-programacion.html">Técnicas
                                        avanzadas de programación</a></li>
                        <br>
                        <img src="/img/wiki/unsam.png" alt="UNSAM" height="40px" width="40px"
                                title="UNSAM" />
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo2-temario.html">Algoritmos
                                        II</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/algo3-temario.html">Algoritmos
                                        III</a></li>
                        <li class="button" role="menuitem"><a href="/wiki/articles/phm-temario.html">Programación
                                        con
                                        Herramientas
                                        Modernas</a></li>
                </ul>
        </div>
</div>

<div class="column small-12 medium-10 large-10">
    <div id="article_title">
    <h1>
        <i>Arena. Manejo de transacciones.</i>
    </h1>
</div>


    <!-- <div id="mw-indicator-featured-star" class="mw-indicator">
    <a href="#"
       title="This is a featured article. Click here for more information."><img
            alt="This is a featured article"
            src="/img/featured_star.png" width="20"
            height="19"
            data-file-width="462" data-file-height="438">
    </a>
</div> -->


<div id="article_content">
    <div id="toc-container">
  <table class="toc" id="toc">
    <tbody>
      <tr>
        <td>
          <div id="toctitle">
            <h2>Contents</h2>
          </div>
          <ul>
            <li class="toc_level-1 toc_section-1">
              <a href="#tocAnchor-1-1"><span class="tocnumber">1</span> <span class="toctext">Introducción</span></a>
            </li>
            <li class="toc_level-1 toc_section-2">
              <a href="#tocAnchor-1-2"><span class="tocnumber">2</span> <span class="toctext">Sincronización mediante repositorios persistentes</span></a>
            </li>
            <li class="toc_level-1 toc_section-3">
              <a href="#tocAnchor-1-3"><span class="tocnumber">3</span> <span class="toctext">Trabajo en una única VM con binding</span></a>
              <ul>
                <li class="toc_level-2 toc_section-4">
                  <a href="#tocAnchor-1-3-1"><span class="tocnumber">3.1</span> <span class="toctext">Opción 1: Manejo manual de los cambios</span></a>
                </li>
                <li class="toc_level-2 toc_section-5">
                  <a href="#tocAnchor-1-3-2"><span class="tocnumber">3.2</span> <span class="toctext">Opción 2: Elementos transaccionales de Arena</span></a>
                </li>
              </ul>
            </li>
            <li class="toc_level-1 toc_section-6">
              <a href="#tocAnchor-1-6"><span class="tocnumber">4</span> <span class="toctext">Links relacionados</span></a>
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div><h1 id="tocAnchor-1-1">Introducción</h1>

<p>Si estamos modificando los datos de una entidad, es frecuente hacerlo en un formulario que tiene dos acciones posibles: aceptar o cancelar los cambios.</p>

<p>
  <img src="/img/wiki/arena_transaction.png" alt="edicion-1" />
</p>

<p>Cuando la UI tiene binding, cualquier modificación que haga el usuario impacta directamente en el modelo. ¿Qué alternativa tenemos entonces para volver atrás los cambios si el usuario desiste la acción?</p>

<h1 id="tocAnchor-1-2">Sincronización mediante repositorios persistentes</h1>

<p>Si estamos en un esquema distribuido, una opción puede ser que nuestro repositorio trabaje con un <strong>medio persistente</strong>, con dos objetivos:</p>

<ul>
  <li>sincronizar la información de las distintas sesiones de usuario</li>
  <li>proveer un ambiente donde las operaciones son transaccionales (todas las actualizaciones ocurren al mismo tiempo o si falla alguna se cancelan las restantes)</li>
</ul>

<p>En ese caso cuando el usuario presiona el botón Aceptar se envía un mensaje al repo para que actualice el objeto del formulario, caso contrario el repo no recibirá ninguna notificación. Cuando un usuario en otra VM diferente quiere actualizar el mismo cliente, el objeto repositorio toma la información del medio persistente para recrear los datos del cliente actualizados. El medio persistente actúa como “la única fuente de verdad”, y mientras que los objetos que están en el ambiente son simplemente un <em>buffer</em> o estado temporal antes de ser almacenados en el medio.</p>

<p>
  <img src="/img/wiki/arena_transactions_2.png" alt="two_users" />
</p>

<h1 id="tocAnchor-1-3">Trabajo en una única VM con binding</h1>

<p>Si en nuestra aplicación el repositorio considera la VM de objetos como la <em>single source of truth</em>, el mecanismo de binding puede traer efectos colaterales: <strong>cada vez que el usuario modifique el nombre, eso tiene un impacto inmediato en el modelo</strong> y tenemos que pensar qué debemos hacer si el usuario quiere cancelar la operación de edición para que efectivamente se deshagan los cambios.</p>

<p>
  <img src="/img/wiki/arena_transactions_3.png" alt="single_vm" />
</p>

<h2 id="tocAnchor-1-3-1">Opción 1: Manejo manual de los cambios</h2>

<p>La primera alternativa consiste en generar una copia del objeto original y asociarlo como modelo de nuestra ventana de modificación.</p>

<ul>
  <li>al cancelar no necesitamos hacer nada, porque los cambios se hicieron contra un objeto que no está asociado al repositorio</li>
  <li>al aceptar, pisamos el objeto original (referenciado desde el repositorio) con los nuevos atributos del objeto copia.</li>
</ul>

<p>
  <img src="/img/wiki/arena_transactions_4.png" alt="copy" />
</p>

<h2 id="tocAnchor-1-3-2">Opción 2: Elementos transaccionales de Arena</h2>

<p>Arena propone un esquema para no tener que resolver esto manualmente:</p>

<ul>
  <li>todos los objetos que sean modelos de una vista se anotan como <code class="language-plaintext highlighter-rouge">@Transactional</code>, para indicar a Arena que participa dentro de una transaccción. Esto incluye a los objetos de dominio y también a los objetos que modelan un caso de uso (que llamamos application model, se explican en el formulario de búsqueda).</li>
  <li>como además queremos que disparen notificaciones a las vistas y demás interesados, debemos mantener la annotation <code class="language-plaintext highlighter-rouge">@Observable</code></li>
  <li>también existe la anotación <code class="language-plaintext highlighter-rouge">@TransactionalAndObservable</code> (cualquiera de las dos variantes funciona exactamente igual)</li>
  <li>la vista debe heredar de <code class="language-plaintext highlighter-rouge">TransactionalDialog&lt;T&gt;</code></li>
</ul>

<p>Y con esto nos alcanza, Arena utiliza la vista para delimitar el alcance de una transacción: cuando el usuario presiona el botón Aceptar se finaliza (<code class="language-plaintext highlighter-rouge">commit</code>). En caso de error, o de presionar el botón Cancelar, la transacción se deshace (<code class="language-plaintext highlighter-rouge">rollback</code>), y los cambios se pierden.</p>

<p>El lector interesado puede consultar <a href="https://github.com/uqbar-project/eg-celulares-ui-arena-xtend">el ejemplo de los celulares</a> que trabaja automáticamente la transacción.</p>

<h1 id="tocAnchor-1-6">Links relacionados</h1>

<ul>
  <li><a href="algo3-temario.html">Temario Algoritmos III</a></li>
</ul>

</div>


    <div id="catlinks" class="catlinks" data-mw="interface">
    <div id="normal-catlinks" class="normal-catlinks"><a href="/wiki/internal/categories.html" title="Help:Category">Categories</a>:
        <ul>
            
             <li><a href="/categories/arena" title="arena">Arena</a></li>
            
             <li><a href="/categories/mvc pesado" title="mvc pesado">Mvc pesado</a></li>
            
             <li><a href="/categories/transaccion" title="transaccion">Transaccion</a></li>
            
             <li><a href="/categories/objetos transaccionales" title="objetos transaccionales">Objetos transaccionales</a></li>
            
        </ul>
    </div>
    <div id="hidden-catlinks" class="hidden-catlinks mw-hidden-cats-hidden">Hidden categories:
        <ul>
            
        </ul>
    </div>
</div>





<div id="article_metadata">
    <!-- <p><i>Latest update on August 30, 2019 by
        Fernando Dodino</i></p>

    <ul class="accordion" data-accordion>
        <li class="accordion-navigation">
            <a href="#panel1a">Page History, Meta information</a>

            <div id="panel1a" class="content">

                <div class="rows">
                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Page Commits</th>
                                <th>Page Additions</th>
                                <th>Page Deletions</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr>
                                <td>1</td>
                                <td>57</td>
                                <td>0</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="column small-12 medium-6 large-6">
                        <table>
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Commits</th>
                            <tr>
                            </thead>

                            <tbody>
                            
                            <tr>
                                <td>Fernando Dodino</td>
                                <td>fernand...</td>
                                <td>1</td>
                            </tr>
                            
                            </tbody>
                        </table>
                    </div>
                </div>

                <table style="margin-left: 15px;">
                    <thead>
                    <tr>
                        <th>Hash</th>
                        <th>Time</th>
                        <th>Name</th>
                        <th>Mail</th>
                        <th>Subject</th>
                    <tr>
                    </thead>

                    <tbody>
                    
                    <tr>
                        <td>e92292f9</td>
                        <td>Fri Aug 30 23:33:51 2019 -0300</td>
                        <td>Fernando Dodino</td>
                        <td>fernand...</td>
                        <td>fix typo in Arena transaction url</td>
                    </tr>
                    
                    </tbody>
                </table>

            </div>
        </li>
    </ul> -->

</div>


</div>


<div id="footer">
    <div class="columns small-12 medium-12 large-12">
        © 2025 - Uqbar Foundation
    </div>
</div>

<script>
    'use strict';
</script>

<script src="/assets/jquery-aa71a7b50270602be524223735204e4e.js"></script>
<script src="/assets/jquery.min-92bca385e77eff06fdfc99d71ff5d9cb.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>

<script src="/assets/foundation/foundation-9cdbe0bbce183118de08f9938e53d976.js"></script>
<script src="/assets/foundation/foundation.abide-89a2bdc8d7b0219f70b26edf2ae6887e.js"></script>
<script src="/assets/foundation/foundation.accordion-fb975cac4e1d51205357ccef64ad87f4.js"></script>
<script src="/assets/foundation/foundation.alert-09f0ede105a8181ae99c1e952f89ca3b.js"></script>
<script src="/assets/foundation/foundation.clearing-1720b58085d63e88f45a453bb9ad3e3b.js"></script>
<script src="/assets/foundation/foundation.dropdown-644acf98749f084fdf912c4b00957f31.js"></script>
<script src="/assets/foundation/foundation.equalizer-97288e933d9acc43fab592768c628ba6.js"></script>
<script src="/assets/foundation/foundation.interchange-083c4df6919a083e985b5e687d5c30b9.js"></script>
<script src="/assets/foundation/foundation.joyride-c8c49db46553294043e6ec5c19e1285b.js"></script>
<script src="/assets/foundation/foundation.magellan-2fb6e4d1e4284a920b3a7d892e2cb54c.js"></script>
<script src="/assets/foundation/foundation.offcanvas-63af9a0eca0822c6f6a77ba0eb3dd7ec.js"></script>
<script src="/assets/foundation/foundation.orbit-79b5540e0f58a265fd959aaf18fc2345.js"></script>
<script src="/assets/foundation/foundation.reveal-620cbbd491fb6eaf8dc057949a254e29.js"></script>
<script src="/assets/foundation/foundation.slider-e5da59a7bd13309d315a6a95e0654b35.js"></script>
<script src="/assets/foundation/foundation.tab-9ea3a242acf982f76f891ac5e32aa92a.js"></script>
<script src="/assets/foundation/foundation.tooltip-926551742e978e4456aa7ca8c6ffe334.js"></script>
<script src="/assets/foundation/foundation.topbar-fa936a3a88514cb2c51c4ccf3fefaeb0.js"></script>

<script src="/assets/jquery.cookie-600df63e64417ec0c172cd3580ffe4f3.js"></script>
<!-- Script pointing to jekyll-search.js -->
<script src="/assets/jekyll-search-db248d3bf113e122870c09fd6d9b0592.js"></script>

<script>
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: "/search.json"
    });

    $(document).foundation();

</script>

<!-- prism.js -->
<script src="/assets/prism-193ebecb65a347c425ecdb3c4592fd0e.js"></script>
</body>
</html>
